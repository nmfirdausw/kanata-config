(defcfg
  concurrent-tap-hold true
)

(defsrc
  esc   f1    f2    f3    f4    f5    f6    f7    f8    f9    f10   f11   f12
  grv   1     2     3     4     5     6     7     8     9     0     -     =     bspc
  tab      q     w     e     r     t     y     u     i     o     p     [     ]     \
  caps       a     s     d     f     g     h     j     k     l     ;     '       ret
  lsft          z     x     c     v     b     n     m     ,     .     /         rsft
  fn    lctl  lalt  lmet               spc                rmet   ralt
)

(defvar
  canary-left-hand-keys (
    w l y p b
    c r s t g
    q j v d k
  )
  canary-right-hand-keys (
    z f o u ;
    m n e i a
    x h / , .
  )
)

(defalias
  mc  C-up ;; Mission Control
  sls M-spc ;; Spotlight Search
  qwr (layer-switch qwerty) ;; Switch to QWERTY
  cnr (layer-switch canary) ;; Switch to Canary
  grv (tap-hold 200 200 grv (layer-while-held layers)) ;; Hold grave for layer switching
  ctr (layer-while-held control) ;; Control layer
  sym (layer-while-held symbols) ;; Navigation layer
  spc (tap-hold-press-timeout 200 9999 spc @ctr spc) ;; Space with Control layer
  tab (tap-hold-press-timeout 200 9999 tab @sym tab) ;; Tab with Symbols layer
  bspc (tap-hold-press-timeout 200 9999 bspc @sym bspc) ;; Backspace with Symbols layer

  ;; Home row mods for canary layout
  c (tap-hold-release-keys 200 200 c lctl $canary-left-hand-keys)    ;; C with Control
  r (tap-hold-release-keys 200 200 r lalt $canary-left-hand-keys)    ;; R with Alt
  s (tap-hold-release-keys 200 200 s lsft $canary-left-hand-keys)    ;; S with Shift
  t (tap-hold-release-keys 200 200 t lmet $canary-left-hand-keys)    ;; T with Meta
  n (tap-hold-release-keys 200 200 n rmet $canary-right-hand-keys)   ;; N with Meta
  e (tap-hold-release-keys 200 200 e rsft $canary-right-hand-keys)   ;; E with Shift
  i (tap-hold-release-keys 200 200 i ralt $canary-right-hand-keys)   ;; I with Alt
  a (tap-hold-release-keys 200 200 a rctl $canary-right-hand-keys)   ;; A with Control

)

(defchordsv2
  (w e) esc 50 all-released (qwerty)
  (s d) tab 50 all-released (qwerty)
  (i o) bspc 50 all-released (qwerty)
  (k l) bspc 50 all-released (qwerty)
  (l ;) ret 50 all-released (qwerty)
  (j ;) ret 50 all-released (qwerty)
)

(deflayer qwerty
  esc   🔅    🔆    @mc   @sls  f5    f6    ◀◀    ▶⏸    ▶▶    🔇    🔉    🔊
  @grv  1     2     3     4     5     6     7     8     9     0     -     =     bspc
  tab      q     w     e     r     t     y     u     i     o     p     [     ]     \
  caps       a     s     d     f     g     h     j     k     l     ;     '       ret
  lsft          z     x     c     v     b     n     m     ,     .     /         rsft
  fn    lctl  lalt  lmet               @spc               rmet   ralt
)

(deflayer canary

  esc   🔅    🔆    @mc   @sls  f5    f6    ◀◀    ▶⏸    ▶▶    🔇    🔉    🔊
  @grv  1     2     3     4     5     6     7     8     9     0     -     =     bspc
  tab      w     l     y     p     b     z     f     o     u     '     [     ]     \
  caps       @c    @r    @s    @t    g     m     @n    @e    @i    @a    '       ret
  q             j     v     d     k     _     x     h     /     ,     .         rsft
  fn     lctl  lalt  @tab              @spc               @bspc  ralt
)

(deflayer control
  _     _     _     _     _     _     _     _     _     _     _     _     _
  _     _     _     _     _     _     _     _     _     _     _     _     _        _
  _        1     2     3     4     5     6     7     8     9     0     _     _     _
  _          home  end  pgup  pgdn   _     lft   down  up    rght  ret   _         _
  _             _     _     _     _     _     _     _     _     _     _            _
  _     _     _     _                   _                 _      _
)

(deflayer symbols
  _     _    _      _     _     _     _     _     _     _     _     _     _
  _     _    _      _     _     _     _     _     _     _     _     _     _        _
  _        S-9   S-[   S-]   S-0   S-7   S-5   [     S-,   S-.   ]     _     _     _
  _          S-6   S-4  -     S-=    S-\   /     S-8   S-3   ;     S-;   _         _	
  `             '     S-'   S--   \     _     S-`   =     S-/   S-2   S-1          _
  _     _     _     _                   _                 _      _
)

(deflayer layers
 _     _    _      _     _     _     _     _     _     _     _     _     _
  _     @qwr @cnr   _     _     _     _     _     _     _     _     _     _        _
  _        _     _     _     _     _     _     _     _     _     _     _     _     _
  _          _     _     _     _     _     _     _     _     _     _     _         _
  _             _     _     _     _     _     _     _     _     _     _            _
  _     _     _     _                   _                 _      _
)	
